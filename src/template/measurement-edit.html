<form flex layout="column" ng-submit="save()">
	<md-toolbar>
		<div class="md-toolbar-tools">
			<md-button type="button" class="md-icon-button" aria-label="{{ 'CLOSE' | translate }}" ui-back>
				<md-icon md-font-icon="mi mi-24 mi-close"></md-icon>
			</md-button>
			<h2><span ng-if="isNew">{{ 'MEASUREMENT_ADD' | translate }}</span>
				<span ng-if="!isNew">{{ 'MEASUREMENT_EDIT' | translate }}</span></h2>
			<span flex></span>
			<md-button type="submit">{{ 'SAVE' | translate }}</md-button>
		</div>
	</md-toolbar>

	<md-content flex layout-padding layout="column">
		<div flex>

			<md-input-container flex>
				<md-select fastclick ng-model="column" ng-disabled="!isNew" aria-label="{{ 'MEASUREMENT_TYPE' | translate }}">
					<md-optgroup ng-repeat="(category, columns) in groupedColumns" label="{{category}}">
						<md-option ng-repeat="column in columns" ng-value="column" ng-style="{ color: column.color }">
							<md-icon md-font-icon="mi mi-24 mi-{{ column.icon }}"></md-icon>{{ column.name | translate }}
						</md-option>
					</md-optgroup>
				</md-select>
			</md-input-container>

			<div layout="row">
				<md-input-container flex>
					<label>{{ 'DATE' | translate }}</label>
					<input type="date" ng-model="measurement.timestamp" ng-disabled="!isNew" required>
				</md-input-container>

				<md-input-container flex>
					<label>{{ 'TIME' | translate }}</label>
					<input type="time" ng-model="measurement.timestamp" ng-disabled="!isNew" step="1" required>
				</md-input-container>
			</div>
			
			<md-input-container flex>
				<label>{{ column.name | translate }} ({{ column.unit | translate }})</label>
				<input required type="number" ng-model="measurement.value" step="any" autofocus-delay="350">
			</md-input-container>

			<md-input-container>
				<label>{{ 'NOTE' | translate }}</label>
				<textarea ng-model="measurement.note"></textarea>
			</md-input-container>

		</div>

	</md-content>
</form>